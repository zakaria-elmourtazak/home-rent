@{
    ViewData["Title"] = "Home Page";
}
@model List<MyMvcAuthProject.Models.Favorite>
    <div class="container mx-auto px-4 py-8 flex flex-col md:flex-row gap-8">
        <aside class="md:w-64 bg-white rounded-lg shadow-md p-6 h-fit">
            <nav>
                <ul class="space-y-2">
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Dashboard" class="flex items-center p-3 text-gray-600 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-tachometer-alt mr-3"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="AdminListings" class="flex items-center p-3 bg-primary text-white rounded-lg">
                            <i class="fas fa-home mr-3"></i>
                            <span>My Listings</span>
                        </a>
                    </li>
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Saved" class="flex items-center p-3 text-gray-600 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-heart mr-3"></i>
                            <span>Saved Properties</span>
                        </a>
                    </li>
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Messages" class="flex items-center p-3 text-gray-600 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-envelope mr-3"></i>
                            <span>Messages</span>
                        </a>
                    </li>
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Profile" class="flex items-center p-3 text-gray-600 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-cog mr-3"></i>
                            <span>Profile Settings</span>
                        </a>
                    </li>
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Index" class="flex items-center p-3 text-gray-600 hover:bg-gray-100 rounded-lg">
                            <i class="fas fa-sign-out-alt mr-3"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        <main class="flex-1">
            <div class="bg-white rounded-lg shadow p-6 mb-6">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <h2 class="text-2xl font-bold">Saved Properties</h2>
                        <p class="text-gray-600">Manage and review your favorited listings</p>
                    </div>
                    <div class="flex flex-wrap gap-3">
                        <select class="border rounded-lg p-3">
                            <option>All Types</option>
                            <option>Apartment</option>
                            <option>House</option>
                            <option>Condo</option>
                        </select>
                        <select class="border rounded-lg p-3">
                            <option>Newest First</option>
                            <option>Oldest First</option>
                            <option>Price: Low to High</option>
                            <option>Price: High to Low</option>
                        </select>
                        <div class="relative">
                            <input type="text" placeholder="Search saved properties" class="border rounded-lg pl-10 pr-4 py-3 w-full">
                            <i class="fas fa-search absolute left-3 top-3.5 text-gray-400"></i>
                        </div>
                    </div>
                </div>
            </div>
@{
    var properties = Model.Select(f => f.Property).ToList() ??  new List<MyMvcAuthProject.Models.Property>();
}
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
            @foreach (Property p in properties)
            {
                <div class="bg-white rounded-xl shadow p-4 border hover:border-primary transition">
                    <div class="relative">
                      @if (p.PropertyImages.Any())
                        {
                            <img src="@p.PropertyImages.First().ImageUrl"  alt="Property" class="rounded-lg h-52 w-full object-cover"/>
                        }
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold"> @p.Title</h3>
                            <span class="text-primary font-bold">$@p.PricePerMonth/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> @p.City, @p.State
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> @p.Bedrooms Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> @p.Bathrooms Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> @p.SquareFeet sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                       <a asp-controller="Home"
       asp-action="PropertyDetail"
       asp-route-id="@p.Id"
       class="flex-1 bg-primary text-white text-center pt-2 mb-3 rounded-lg hover:bg-secondary transition">
        View Details
    </a>

    <form asp-controller="Favorite"
          asp-action="RemoveFavorite"
          asp-route-id="@p.Id"
          method="post"
          class="flex-1">
        <button class="w-full border border-gray-300 py-2 rounded-lg hover:bg-gray-50">
            Remove
        </button>
    </form>

                        </div>
                    </div>
                </div>
            }
@* 
                <div class="bg-white rounded-xl shadow p-4 border hover:border-primary transition">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1575517111839-3a3843ee7f5d?auto=format&fit=crop&w=600&q=80" alt="Property" class="rounded-lg h-52 w-full object-cover">
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold">Suburban House</h3>
                            <span class="text-primary font-bold">$2,400/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> Austin, TX
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> 4 Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> 3 Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> 2200 sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <button class="flex-1 bg-primary text-white py-2 rounded-lg hover:bg-secondary transition">View Details</button>
                            <button class="flex-1 border border-gray-300 py-2 rounded-lg hover:bg-gray-50">Remove</button>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow p-4 border hover:border-primary transition">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600&q=80" alt="Property" class="rounded-lg h-52 w-full object-cover">
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold">Luxury Condo</h3>
                            <span class="text-primary font-bold">$3,200/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> Miami, FL
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> 3 Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> 2 Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> 1600 sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <button class="flex-1 bg-primary text-white py-2 rounded-lg hover:bg-secondary transition">View Details</button>
                            <button class="flex-1 border border-gray-300 py-2 rounded-lg hover:bg-gray-50">Remove</button>
                        </div>
                    </div>
                </div> *@
            </div>
        </main>
    </div>
