@{
    ViewData["Title"] = "Home Page";
}
@model List<MyMvcAuthProject.Models.Favorite>
    <div class="container mx-auto px-4 py-8 flex flex-col md:flex-row gap-8">
          @await Html.PartialAsync("_AccountSidebar")

        <main class="flex-1" style="height: 700px;">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4" >
                    <div>
                        <h2 class="text-2xl font-bold">Saved Properties</h2>
                        @* <p class="text-gray-500">Manage and review your favorited listings</p> *@
                    </div>
                    <div class="flex flex-wrap gap-3">
                        <select class="border rounded-lg p-2 input w-40 text-sm text-gray-500">
                            <option>All Types</option>
                            <option>Apartment</option>
                            <option>House</option>
                            <option>Condo</option>
                        </select>
                        <select class="border rounded-lg p-2 input text-sm text-gray-500">
                            <option>Newest First</option>
                            <option>Oldest First</option>
                            <option>Price: Low to High</option>
                            <option>Price: High to Low</option>
                        </select>
                        <div class="relative">
                            <input type="text" placeholder="Search saved properties" class="text-sm input border rounded-lg pl-10 pr-4 py-2 w-full">
                            <i class="fas fa-search absolute left-3 top-3.5   text-gray-400 mb-1 pb-1"></i>
                        </div>
                    </div>
                </div>

                        <hr class="mb-3 mt-3 text-gray-400 pb-1/2 ">

@{
    var properties = Model.Select(f => f.Property).ToList() ??  new List<MyMvcAuthProject.Models.Property>();
}
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
            @foreach (Property p in properties)
            {
                @* <div class="bg-white rounded-xl shadow-sm p-4 border hover:border-primary transition">
                    <div class="relative">
                      @if (p.PropertyImages.Any())
                        {
                            <img src="@p.PropertyImages.First().ImageUrl"  alt="Property" class="rounded-lg h-52 w-full object-cover"/>
                        }
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow-sm">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold"> @p.Title</h3>
                            <span class="text-primary font-bold">$@p.PricePerMonth/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> @p.City, @p.State
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> @p.Bedrooms Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> @p.Bathrooms Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> @p.SquareFeet sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                       <a asp-controller="Home"
       asp-action="PropertyDetail"
       asp-route-id="@p.Id"
       class="flex-1 bg-primary text-white text-center pt-2 mb-3 rounded-lg hover:bg-secondary transition">
        View Details
    </a>

    <form asp-controller="Favorite"
          asp-action="RemoveFavorite"
          asp-route-id="@p.Id"
          method="post"
          class="flex-1">
        <button class="w-full border border-gray-300 py-2 rounded-lg hover:bg-gray-50">
            Remove
        </button>
    </form>

                        </div>
                    </div>
                </div> *@
                <div
                    class="bg-white shadow-md rounded-lg overflow-hidden cursor-pointer hover:shadow-xl transition-shadow duration-300">
                  <a asp-controller="Home" asp-action="PropertyDetail" asp-route-id="@p.Id"> 
                    @if (p.PropertyImages.Any())
                    {
                        <div class="bg-cover bg-center h-56 p-3 "
                            style="background-image: url(@p.PropertyImages.First().ImageUrl)">
                            <div class="flex justify-end">
                                <span
                                    class="bg-black/35 backdrop-blur-sm text-white text-xs font-semibold uppercase tracking-wider px-3 py-1 rounded-full">
                                    @p.PropertyType
                                </span>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="bg-cover bg-center h-56 p-3 hover:scale-103 transition-transform duration-500"
                            style="background-image: url(https://images.unsplash.com/photo-1475855581690-80accde3ae2b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80)">
                            <div class="flex justify-end">
                                <span
                                    class="bg-black/35 backdrop-blur-sm text-white text-xs font-semibold uppercase tracking-wider px-3 py-1 rounded-full">
                                    @p.PropertyType
                                </span>
                            </div>
                        </div>
                    }
                    <div class="p-4  space-y-1">
                        <p class="uppercase tracking-wide text-sm font-bold text-gray-500">
                            @p.Title • For Rent
                        </p>

                        <p class="text-2xl text-gray-600 "><span class="text-primary">$</span>@p.PricePerMonth <span
                                class="text-xs text-gray-500 tracking-wide  font-bold"> / month</span> </p>

                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="h-4 w-4 mr-1 fill-current" viewBox="0 0 24 24">
                                <path
                                    d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z" />
                            </svg>
                            @p.StreetAddress, @p.City, @p.State
                        </div>
                    </div>
                    <div class="flex p-4 py-3 border-t border-gray-200 text-gray-700 text-sm bg-green-50">
                        <div class="flex-1 inline-flex items-center">
                            <svg class="h-6 w-6 text-gray-600 fill-current mr-3" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24">
                                <path
                                    d="M0 16L3 5V1a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v4l3 11v5a1 1 0 0 1-1 1v2h-1v-2H2v2H1v-2a1 1 0 0 1-1-1v-5zM19 5h1V1H4v4h1V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1h2V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1zm0 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V6h-2v2a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6H3.76L1.04 16h21.92L20.24 6H19zM1 17v4h22v-4H1zM6 4v4h4V4H6zm8 0v4h4V4h-4z">
                                </path>
                            </svg>
                            <p><span class="text-gray-600 font-bold">@p.Bedrooms</span> Beds</p>
                        </div>
                        <div class="flex-1 inline-flex items-center">
                            <svg class="h-6 w-6 text-gray-600 fill-current mr-3" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24">
                                <path fill-rule="evenodd"
                                    d="M17.03 21H7.97a4 4 0 0 1-1.3-.22l-1.22 2.44-.9-.44 1.22-2.44a4 4 0 0 1-1.38-1.55L.5 11h7.56a4 4 0 0 1 1.78.42l2.32 1.16a4 4 0 0 0 1.78.42h9.56l-2.9 5.79a4 4 0 0 1-1.37 1.55l1.22 2.44-.9.44-1.22-2.44a4 4 0 0 1-1.3.22zM21 11h2.5a.5.5 0 1 1 0 1h-9.06a4.5 4.5 0 0 1-2-.48l-2.32-1.15A3.5 3.5 0 0 0 8.56 10H.5a.5.5 0 0 1 0-1h8.06c.7 0 1.38.16 2 .48l2.32 1.15a3.5 3.5 0 0 0 1.56.37H20V2a1 1 0 0 0-1.74-.67c.64.97.53 2.29-.32 3.14l-.35.36-3.54-3.54.35-.35a2.5 2.5 0 0 1 3.15-.32A2 2 0 0 1 21 2v9zm-5.48-9.65l2 2a1.5 1.5 0 0 0-2-2zm-10.23 17A3 3 0 0 0 7.97 20h9.06a3 3 0 0 0 2.68-1.66L21.88 14h-7.94a5 5 0 0 1-2.23-.53L9.4 12.32A3 3 0 0 0 8.06 12H2.12l3.17 6.34z">
                                </path>
                            </svg>
                            <p><span class="text-gray-600 font-bold">@p.Bathrooms</span> Baths</p>
                        </div>
                        <div class="flex-1 inline-flex items-center">
                            <svg class="h-6 w-6 text-gray-600 fill-current mr-3" viewBox="0 0 24 24">
                                <path d="M3 3h18v2H3V3zm0 14h18v2H3v-2zm2-10h14v6H5V7z" />
                            </svg>
                            <p>
                                <span class="text-gray-600 font-bold">120</span> m²
                            </p>
                        </div>
                    </div>
</a>
<hr>
<form asp-controller="Favorite"
          asp-action="RemoveFavorite"
          asp-route-id="@p.Id"
          method="post"
          class="flex-1">
                        <button class="w-full bg-primary  text-white border-gray-300 py-3 button  hover:bg-gray-50 flex items-center justify-center">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2-fill mr-2" viewBox="0 0 16 16">
  <path d="M2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671zm9.89-.69C10.966 2.214 9.578 2 8 2c-1.58 0-2.968.215-3.926.534-.477.16-.795.327-.975.466.18.14.498.307.975.466C5.032 3.786 6.42 4 8 4s2.967-.215 3.926-.534c.477-.16.795-.327.975-.466-.18-.14-.498-.307-.975-.466z"/>
</svg>Delete                      
  </button>
  </form>
                </div>
            }
@* 
                <div class="bg-white rounded-xl shadow-sm p-4 border hover:border-primary transition">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1575517111839-3a3843ee7f5d?auto=format&fit=crop&w=600&q=80" alt="Property" class="rounded-lg h-52 w-full object-cover">
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow-sm">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold">Suburban House</h3>
                            <span class="text-primary font-bold">$2,400/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> Austin, TX
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> 4 Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> 3 Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> 2200 sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <button class="flex-1 bg-primary text-white py-2 rounded-lg hover:bg-secondary transition">View Details</button>
                            <button class="flex-1 border border-gray-300 py-2 rounded-lg hover:bg-gray-50">Remove</button>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-4 border hover:border-primary transition">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600&q=80" alt="Property" class="rounded-lg h-52 w-full object-cover">
                        <button class="absolute top-3 right-3 bg-white text-red-500 rounded-full p-2 shadow-sm">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-semibold">Luxury Condo</h3>
                            <span class="text-primary font-bold">$3,200/mo</span>
                        </div>
                        <p class="text-gray-500 mt-1 flex items-center">
                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i> Miami, FL
                        </p>
                        <div class="flex items-center gap-4 text-gray-600 mt-3">
                            <span><i class="fas fa-bed mr-1"></i> 3 Beds</span>
                            <span><i class="fas fa-bath mr-1"></i> 2 Baths</span>
                            <span><i class="fas fa-ruler-combined mr-1"></i> 1600 sqft</span>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <button class="flex-1 bg-primary text-white py-2 rounded-lg hover:bg-secondary transition">View Details</button>
                            <button class="flex-1 border border-gray-300 py-2 rounded-lg hover:bg-gray-50">Remove</button>
                        </div>
                    </div>
                </div> *@
            </div>
        </main>
    </div>
